{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Users/mohamadhasan tabrizi/Desktop/capitalnext/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/mohamadhasan tabrizi/Desktop/capitalnext/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\mohamadhasan tabrizi\\\\Desktop\\\\capitalnext\\\\components\\\\loginform\\\\authForm.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport classes from \"./authform.module.css\";\nimport Input from \"../UI/input/input\";\nimport Btn from \"../UI/btn/btn\";\nimport { useRef, useState } from \"react\";\nimport { userLogIn, userSignIn } from \"../../dataFetching/postData\";\nimport { signIn } from \"next-auth/client\";\nimport { useRouter } from \"next/router\";\nimport * as actions from \"../../store/actions/auth\";\nimport { connect } from \"react-redux\";\n\nvar AuthForm = function AuthForm(props) {\n  _s();\n\n  var router = useRouter(); //define state for page layout\n\n  var _useState = useState(true),\n      loginMode = _useState[0],\n      setLogInMode = _useState[1];\n\n  var switchLoginModeHandler = function switchLoginModeHandler() {\n    setLogInMode(function (prevState) {\n      return !prevState;\n    });\n  }; // defining state for if user loged in or not\n\n\n  var _useState2 = useState(false),\n      isLogin = _useState2[0],\n      setIsLogin = _useState2[1]; // change the login mode\n  // defining ref\n\n\n  var emailInputRef = useRef();\n  var passwordInputRef = useRef();\n  var confrimPasswordInputRef = useRef();\n  var userNameInputRef = useRef(); //function for loging in the user\n\n  var logTheUserIn = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var email, password;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              email = emailInputRef.current.value;\n              password = passwordInputRef.current.value;\n              props.onAuth(email, password); // const result = await signIn(\"credentials\",{\n              //   redirect:false,\n              //   email,\n              //   password\n              // });\n              // if(!result.error){\n              //   router.replace(\"/\");\n              // }else{\n              //   alert(\"user cant be loged in\")\n              // }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function logTheUserIn(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(); //function for creating new user\n\n\n  var createUser = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var newUserInfo;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              newUserInfo = {\n                username: userNameInputRef.current.value,\n                email: emailInputRef.current.value,\n                password: passwordInputRef.current.value,\n                passwordConfirm: confrimPasswordInputRef.current.value\n              }; // simple validation\n\n              props.onSignUp(newUserInfo); // try{\n              //   const response = await userSignIn(\"http://127.0.0.2:8000/api/v1/user/signup\", newUserInfo);\n              //   if(response.status === \"success\"){\n              //     alert(\"new user created\");\n              //     return response;\n              //   }else{\n              //     throw new Error(response.message || \"your request is failed from server\");\n              //   }\n              // }catch(err){\n              //   console.log(err);\n              // }\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function createUser(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [loginMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.Content,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        dir: \"rtl\",\n        className: classes.FormBox,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          dir: \"rtl\",\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"float-right\",\n            children: \"\\u0622\\u062F\\u0631\\u0633 \\u0627\\u0644\\u06A9\\u062A\\u0631\\u0648\\u0646\\u06CC\\u06A9\\u06CC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              width: \"true\",\n              ref: emailInputRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          dir: \"rtl\",\n          className: \"mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"float-right\",\n            children: \"\\u0631\\u0645\\u0632 \\u0639\\u0628\\u0648\\u0631\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              width: \"true\",\n              ref: passwordInputRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.BtnBox,\n          children: [/*#__PURE__*/_jsxDEV(Btn, {\n            onClick: function onClick(e) {\n              return logTheUserIn(e);\n            },\n            children: \"\\u0648\\u0631\\u0648\\u062F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(Btn, {\n            className: \"mt-3\",\n            onClick: function onClick() {\n              return switchLoginModeHandler();\n            },\n            children: \"\\u062B\\u0628\\u062A \\u0646\\u0627\\u0645 \\u0646\\u06A9\\u0631\\u062F\\u0647 \\u0627\\u06CC\\u062F!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 15\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }, _this), loginMode || /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.Content,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        dir: \"rtl\",\n        className: classes.FormBox,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          dir: \"rtl\",\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"float-right\",\n            children: \"\\u0646\\u0627\\u0645 \\u06A9\\u0627\\u0631\\u0628\\u0631\\u06CC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              width: \"true\",\n              ref: userNameInputRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          dir: \"rtl\",\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"float-right\",\n            children: \"\\u0622\\u062F\\u0631\\u0633 \\u0627\\u0644\\u06A9\\u062A\\u0631\\u0648\\u0646\\u06CC\\u06A9\\u06CC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              width: \"true\",\n              ref: emailInputRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          dir: \"rtl\",\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"float-right\",\n            children: \"\\u0631\\u0645\\u0632 \\u0639\\u0628\\u0648\\u0631\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              width: \"true\",\n              ref: passwordInputRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          dir: \"rtl\",\n          className: \"mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"float-right\",\n            children: \"\\u062A\\u06A9\\u0631\\u0627\\u0631 \\u0631\\u0645\\u0632 \\u0639\\u0628\\u0648\\u0631\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              width: \"true\",\n              ref: confrimPasswordInputRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.BtnBox,\n          children: [/*#__PURE__*/_jsxDEV(Btn, {\n            onClick: function onClick() {\n              return switchLoginModeHandler();\n            },\n            children: \"\\u0639\\u0636\\u0648 \\u0647\\u0633\\u062A\\u0645!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(Btn, {\n            onClick: function onClick(e) {\n              return createUser(e);\n            },\n            children: \"\\u062B\\u0628\\u062A \\u0646\\u0627\\u0645\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 15\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(AuthForm, \"sbcM2CRnfQr6XZOLXiN0MT+KWZk=\", false, function () {\n  return [useRouter];\n});\n\n_c = AuthForm;\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onAuth: function onAuth(email, password) {\n      return dispatch(actions.auth(email, password));\n    },\n    onSignUp: function onSignUp(username, email, password, passwordConfirm) {\n      return dispatch(actions.signUp(username, email, password, passwordConfirm));\n    }\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(AuthForm);\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthForm\");","map":{"version":3,"sources":["C:/Users/mohamadhasan tabrizi/Desktop/capitalnext/components/loginform/authForm.js"],"names":["classes","Input","Btn","useRef","useState","userLogIn","userSignIn","signIn","useRouter","actions","connect","AuthForm","props","router","loginMode","setLogInMode","switchLoginModeHandler","prevState","isLogin","setIsLogin","emailInputRef","passwordInputRef","confrimPasswordInputRef","userNameInputRef","logTheUserIn","e","preventDefault","email","current","value","password","onAuth","createUser","newUserInfo","username","passwordConfirm","onSignUp","Content","FormBox","BtnBox","mapDispatchToProps","dispatch","auth","signUp"],"mappings":"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","sourcesContent":["import classes from \"./authform.module.css\";\r\nimport Input from \"../UI/input/input\";\r\nimport Btn from \"../UI/btn/btn\";\r\nimport { useRef, useState } from \"react\";\r\nimport { userLogIn, userSignIn } from \"../../dataFetching/postData\";\r\nimport {signIn} from \"next-auth/client\";\r\nimport {useRouter} from \"next/router\";\r\nimport * as actions from \"../../store/actions/auth\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst AuthForm = (props) => {\r\n  const router = useRouter();\r\n    //define state for page layout\r\n    const[loginMode, setLogInMode] = useState(true);\r\n    const switchLoginModeHandler = () => {\r\n      setLogInMode((prevState) => !prevState);\r\n    };\r\n\r\n\r\n    // defining state for if user loged in or not\r\n    const [isLogin, setIsLogin] = useState(false);\r\n    // change the login mode\r\n    \r\n    \r\n    // defining ref\r\n    const emailInputRef = useRef();\r\n    const passwordInputRef = useRef();\r\n    const confrimPasswordInputRef = useRef();\r\n    const userNameInputRef = useRef();\r\n\r\n\r\n    //function for loging in the user\r\n    const logTheUserIn = async (e) => {\r\n      e.preventDefault();\r\n      \r\n      const email = emailInputRef.current.value;\r\n      const password= passwordInputRef.current.value;\r\n\r\n\r\n\r\n      props.onAuth(email,password);\r\n      // const result = await signIn(\"credentials\",{\r\n      //   redirect:false,\r\n      //   email,\r\n      //   password\r\n      // });\r\n      // if(!result.error){\r\n      //   router.replace(\"/\");\r\n      // }else{\r\n      //   alert(\"user cant be loged in\")\r\n      // }\r\n      \r\n\r\n      \r\n    }\r\n\r\n    //function for creating new user\r\n    const createUser = async (e) => {\r\n      e.preventDefault();\r\n      const newUserInfo = {\r\n        username: userNameInputRef.current.value,\r\n        email: emailInputRef.current.value,\r\n        password: passwordInputRef.current.value,\r\n        passwordConfirm: confrimPasswordInputRef.current.value,\r\n      };\r\n      // simple validation\r\n      \r\n      props.onSignUp(newUserInfo);\r\n      // try{\r\n      //   const response = await userSignIn(\"http://127.0.0.2:8000/api/v1/user/signup\", newUserInfo);\r\n      //   if(response.status === \"success\"){\r\n      //     alert(\"new user created\");\r\n      //     return response;\r\n      //   }else{\r\n      //     throw new Error(response.message || \"your request is failed from server\");\r\n      //   }\r\n      // }catch(err){\r\n      //   console.log(err);\r\n      // }\r\n    };\r\n    \r\n    return (\r\n      <>\r\n        {loginMode && (\r\n          <div className={classes.Content}>\r\n            <div dir=\"rtl\" className={classes.FormBox}>\r\n              <div dir=\"rtl\" className=\"mb-3\">\r\n                <label className=\"float-right\">آدرس الکترونیکی</label>\r\n                <div>\r\n                  <Input width=\"true\" ref={emailInputRef} />\r\n                </div>\r\n              </div>\r\n              <div dir=\"rtl\" className=\"mb-5\">\r\n                <label className=\"float-right\">رمز عبور</label>\r\n                <div>\r\n                  <Input width=\"true\" ref={passwordInputRef} />\r\n                </div>\r\n              </div>\r\n              <div className={classes.BtnBox}>\r\n                <Btn onClick={(e) => logTheUserIn(e)}>ورود</Btn>\r\n                <Btn className=\"mt-3\" onClick={() => switchLoginModeHandler()}>\r\n                  ثبت نام نکرده اید!\r\n                </Btn>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {loginMode || (\r\n          <div className={classes.Content}>\r\n            <div dir=\"rtl\" className={classes.FormBox}>\r\n              <div dir=\"rtl\" className=\"mb-3\">\r\n                <label className=\"float-right\">نام کاربری</label>\r\n                <div>\r\n                  <Input width=\"true\" ref={userNameInputRef} />\r\n                </div>\r\n              </div>\r\n              <div dir=\"rtl\" className=\"mb-3\">\r\n                <label className=\"float-right\">آدرس الکترونیکی</label>\r\n                <div>\r\n                  <Input width=\"true\" ref={emailInputRef} />\r\n                </div>\r\n              </div>\r\n              <div dir=\"rtl\" className=\"mb-3\">\r\n                <label className=\"float-right\">رمز عبور</label>\r\n                <div>\r\n                  <Input width=\"true\" ref={passwordInputRef} />\r\n                </div>\r\n              </div>\r\n              <div dir=\"rtl\" className=\"mb-5\">\r\n                <label className=\"float-right\">تکرار رمز عبور</label>\r\n                <div>\r\n                  <Input width=\"true\" ref={confrimPasswordInputRef} />\r\n                </div>\r\n              </div>\r\n              <div className={classes.BtnBox}>\r\n                <Btn onClick={() => switchLoginModeHandler()}>عضو هستم!</Btn>\r\n                <Btn onClick={(e) => createUser(e)}>ثبت نام</Btn>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </>\r\n    );\r\n}\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onAuth: (email, password) => dispatch(actions.auth(email, password)),\r\n    onSignUp: (username, email, password, passwordConfirm) =>\r\n      dispatch(actions.signUp(username, email, password, passwordConfirm)),\r\n  };\r\n}\r\nexport default connect(null,mapDispatchToProps)(AuthForm);"]},"metadata":{},"sourceType":"module"}