{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Users/mohamadhasan tabrizi/Desktop/capitalnext/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/mohamadhasan tabrizi/Desktop/capitalnext/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/mohamadhasan tabrizi/Desktop/capitalnext/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\mohamadhasan tabrizi\\\\Desktop\\\\capitalnext\\\\components\\\\loginform\\\\authForm.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport classes from \"./authform.module.css\";\nimport Input from \"../UI/input/input\";\nimport Btn from \"../UI/btn/btn\";\nimport { useRef, useState } from \"react\";\nimport { userLogIn, userSignIn } from \"../../dataFetching/postData\"; // import {signIn} from \"next-auth/client\";\n\nimport { useSession } from \"next-auth/client\";\n\nvar AuthForm = function AuthForm(props) {\n  _s();\n\n  // state for page mode sign in mode and login mode\n  var _useState = useState(true),\n      authMode = _useState[0],\n      setAuthMode = _useState[1]; // defining state for if user loged in or not\n\n\n  var _useState2 = useState(false),\n      isLogin = _useState2[0],\n      setIsLogin = _useState2[1]; //\n\n\n  var _useSession = useSession(),\n      _useSession2 = _slicedToArray(_useSession, 2),\n      session = _useSession2[0],\n      loading = _useSession2[1];\n\n  console.log(session);\n  console.log(loading); // defining ref\n\n  var emailInputRef = useRef();\n  var passwordInputRef = useRef();\n  var confrimPasswordInputRef = useRef();\n  var userNameInputRef = useRef(); //send email and password to authentiat user\n\n  var logTheUserIn = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var userInfo, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              userInfo = {\n                email: emailInputRef.current.value,\n                password: passwordInputRef.current.value\n              };\n\n              if (!isLogin) {\n                _context.next = 5;\n                break;\n              }\n\n              _context.next = 19;\n              break;\n\n            case 5:\n              _context.prev = 5;\n              _context.next = 8;\n              return userLogIn(\"http://127.0.0.2:8000/api/v1/user/login\", userInfo);\n\n            case 8:\n              response = _context.sent;\n\n              if (!(response.status === \"success\")) {\n                _context.next = 13;\n                break;\n              }\n\n              console.log(response.token);\n              _context.next = 14;\n              break;\n\n            case 13:\n              throw new Error(\"server responsed with unsuccess\");\n\n            case 14:\n              _context.next = 19;\n              break;\n\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](5);\n              console.log(_context.t0);\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 16]]);\n    }));\n\n    return function logTheUserIn(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var createUser = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var newUserInfo, response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              newUserInfo = {\n                username: userNameInputRef.current.value,\n                email: emailInputRef.current.value,\n                password: passwordInputRef.current.value,\n                passwordConfirm: confrimPasswordInputRef.current.value\n              };\n              _context2.prev = 2;\n              _context2.next = 5;\n              return userSignIn(\"http://127.0.0.2:8000/api/v1/user/signup\", newUserInfo);\n\n            case 5:\n              response = _context2.sent;\n\n              if (!(response.status === \"success\")) {\n                _context2.next = 10;\n                break;\n              }\n\n              console.log(response.token);\n              _context2.next = 11;\n              break;\n\n            case 10:\n              throw new Error(\"your request is failed\");\n\n            case 11:\n              _context2.next = 16;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](2);\n              console.log(_context2.t0);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[2, 13]]);\n    }));\n\n    return function createUser(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [authMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.Content,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        dir: \"rtl\",\n        className: classes.FormBox,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          dir: \"rtl\",\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"float-right\",\n            children: \"\\u0622\\u062F\\u0631\\u0633 \\u0627\\u0644\\u06A9\\u062A\\u0631\\u0648\\u0646\\u06CC\\u06A9\\u06CC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              width: \"true\",\n              ref: emailInputRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          dir: \"rtl\",\n          className: \"mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"float-right\",\n            children: \"\\u0631\\u0645\\u0632 \\u0639\\u0628\\u0648\\u0631\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              width: \"true\",\n              ref: passwordInputRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.BtnBox,\n          children: [/*#__PURE__*/_jsxDEV(Btn, {\n            onClick: function onClick(e) {\n              return logTheUserIn(e);\n            },\n            children: \"\\u0648\\u0631\\u0648\\u062F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(Btn, {\n            className: \"mt-3\",\n            onClick: function onClick() {\n              return setAuthMode(false);\n            },\n            children: \"\\u062B\\u0628\\u062A \\u0646\\u0627\\u0645 \\u0646\\u06A9\\u0631\\u062F\\u0647 \\u0627\\u06CC\\u062F!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }, _this), authMode || /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.Content,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        dir: \"rtl\",\n        className: classes.FormBox,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          dir: \"rtl\",\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"float-right\",\n            children: \"\\u0646\\u0627\\u0645 \\u06A9\\u0627\\u0631\\u0628\\u0631\\u06CC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              width: \"true\",\n              ref: userNameInputRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          dir: \"rtl\",\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"float-right\",\n            children: \"\\u0622\\u062F\\u0631\\u0633 \\u0627\\u0644\\u06A9\\u062A\\u0631\\u0648\\u0646\\u06CC\\u06A9\\u06CC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              width: \"true\",\n              ref: emailInputRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          dir: \"rtl\",\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"float-right\",\n            children: \"\\u0631\\u0645\\u0632 \\u0639\\u0628\\u0648\\u0631\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              width: \"true\",\n              ref: passwordInputRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          dir: \"rtl\",\n          className: \"mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"float-right\",\n            children: \"\\u062A\\u06A9\\u0631\\u0627\\u0631 \\u0631\\u0645\\u0632 \\u0639\\u0628\\u0648\\u0631\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              width: \"true\",\n              ref: confrimPasswordInputRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.BtnBox,\n          children: [/*#__PURE__*/_jsxDEV(Btn, {\n            onClick: function onClick() {\n              return setAuthMode(true);\n            },\n            children: \"\\u0639\\u0636\\u0648 \\u0647\\u0633\\u062A\\u0645!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(Btn, {\n            onClick: function onClick(e) {\n              return createUser(e);\n            },\n            children: \"\\u062B\\u0628\\u062A \\u0646\\u0627\\u0645\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 15\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(AuthForm, \"eplhZUod5/hBZ/Op/BlfjPA80m4=\", false, function () {\n  return [useSession];\n});\n\n_c = AuthForm;\nexport default AuthForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthForm\");","map":{"version":3,"sources":["C:/Users/mohamadhasan tabrizi/Desktop/capitalnext/components/loginform/authForm.js"],"names":["classes","Input","Btn","useRef","useState","userLogIn","userSignIn","useSession","AuthForm","props","authMode","setAuthMode","isLogin","setIsLogin","session","loading","console","log","emailInputRef","passwordInputRef","confrimPasswordInputRef","userNameInputRef","logTheUserIn","e","preventDefault","userInfo","email","current","value","password","response","status","token","Error","createUser","newUserInfo","username","passwordConfirm","Content","FormBox","BtnBox"],"mappings":";;;;;;;;;;AAAA,OAAOA,OAAP,MAAoB,uBAApB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,OAAOC,GAAP,MAAgB,eAAhB;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,OAAjC;AACA,SAASC,SAAT,EAAoBC,UAApB,QAAsC,6BAAtC,C,CACA;;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAW;AAAA;;AAC1B;AAD0B,kBAEQL,QAAQ,CAAC,IAAD,CAFhB;AAAA,MAEjBM,QAFiB;AAAA,MAEPC,WAFO,iBAGxB;;;AAHwB,mBAIMP,QAAQ,CAAC,KAAD,CAJd;AAAA,MAIjBQ,OAJiB;AAAA,MAIRC,UAJQ,kBAKxB;;;AALwB,oBAMIN,UAAU,EANd;AAAA;AAAA,MAMjBO,OANiB;AAAA,MAMPC,OANO;;AAOxBC,EAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ,EARwB,CASxB;;AACA,MAAMG,aAAa,GAAGf,MAAM,EAA5B;AACA,MAAMgB,gBAAgB,GAAGhB,MAAM,EAA/B;AACA,MAAMiB,uBAAuB,GAAGjB,MAAM,EAAtC;AACA,MAAMkB,gBAAgB,GAAGlB,MAAM,EAA/B,CAbwB,CAcxB;;AACA,MAAMmB,YAAY;AAAA,wEAAG,iBAAOC,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBA,cAAAA,CAAC,CAACC,cAAF;AAEMC,cAAAA,QAHa,GAGF;AACfC,gBAAAA,KAAK,EAAER,aAAa,CAACS,OAAd,CAAsBC,KADd;AAEfC,gBAAAA,QAAQ,EAAEV,gBAAgB,CAACQ,OAAjB,CAAyBC;AAFpB,eAHE;;AAAA,mBAQhBhB,OARgB;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,qBAeQP,SAAS,CAC9B,yCAD8B,EAE9BoB,QAF8B,CAfjB;;AAAA;AAeTK,cAAAA,QAfS;;AAAA,oBAmBXA,QAAQ,CAACC,MAAT,KAAoB,SAnBT;AAAA;AAAA;AAAA;;AAoBbf,cAAAA,OAAO,CAACC,GAAR,CAAYa,QAAQ,CAACE,KAArB;AApBa;AAAA;;AAAA;AAAA,oBAsBP,IAAIC,KAAJ,CAAU,iCAAV,CAtBO;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAyBfjB,cAAAA,OAAO,CAACC,GAAR;;AAzBe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZK,YAAY;AAAA;AAAA;AAAA,KAAlB;;AA+BA,MAAMY,UAAU;AAAA,yEAAG,kBAAOX,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBA,cAAAA,CAAC,CAACC,cAAF;AACMW,cAAAA,WAFW,GAEG;AAClBC,gBAAAA,QAAQ,EAAEf,gBAAgB,CAACM,OAAjB,CAAyBC,KADjB;AAElBF,gBAAAA,KAAK,EAAER,aAAa,CAACS,OAAd,CAAsBC,KAFX;AAGlBC,gBAAAA,QAAQ,EAAEV,gBAAgB,CAACQ,OAAjB,CAAyBC,KAHjB;AAIlBS,gBAAAA,eAAe,EAAEjB,uBAAuB,CAACO,OAAxB,CAAgCC;AAJ/B,eAFH;AAAA;AAAA;AAAA,qBASQtB,UAAU,CAAC,0CAAD,EAA6C6B,WAA7C,CATlB;;AAAA;AASTL,cAAAA,QATS;;AAAA,oBAUZA,QAAQ,CAACC,MAAT,KAAoB,SAVR;AAAA;AAAA;AAAA;;AAWbf,cAAAA,OAAO,CAACC,GAAR,CAAYa,QAAQ,CAACE,KAArB;AAXa;AAAA;;AAAA;AAAA,oBAaP,IAAIC,KAAJ,CAAU,wBAAV,CAbO;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAgBfjB,cAAAA,OAAO,CAACC,GAAR;;AAhBe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAViB,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAoBA,sBACE;AAAA,eACGxB,QAAQ,iBACP;AAAK,MAAA,SAAS,EAAEV,OAAO,CAACsC,OAAxB;AAAA,6BACE;AAAK,QAAA,GAAG,EAAC,KAAT;AAAe,QAAA,SAAS,EAAEtC,OAAO,CAACuC,OAAlC;AAAA,gCACE;AAAK,UAAA,GAAG,EAAC,KAAT;AAAe,UAAA,SAAS,EAAC,MAAzB;AAAA,kCACE;AAAO,YAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAA,mCACE,QAAC,KAAD;AAAO,cAAA,KAAK,EAAC,MAAb;AAAoB,cAAA,GAAG,EAAErB;AAAzB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAOE;AAAK,UAAA,GAAG,EAAC,KAAT;AAAe,UAAA,SAAS,EAAC,MAAzB;AAAA,kCACE;AAAO,YAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAA,mCACE,QAAC,KAAD;AAAO,cAAA,KAAK,EAAC,MAAb;AAAoB,cAAA,GAAG,EAAEC;AAAzB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBAPF,eAaE;AAAK,UAAA,SAAS,EAAEnB,OAAO,CAACwC,MAAxB;AAAA,kCACE,QAAC,GAAD;AAAK,YAAA,OAAO,EAAE,iBAACjB,CAAD;AAAA,qBAAOD,YAAY,CAACC,CAAD,CAAnB;AAAA,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE,QAAC,GAAD;AAAK,YAAA,SAAS,EAAC,MAAf;AAAsB,YAAA,OAAO,EAAE;AAAA,qBAAMZ,WAAW,CAAC,KAAD,CAAjB;AAAA,aAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBAbF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,aAFJ,EAyBGD,QAAQ,iBACP;AAAK,MAAA,SAAS,EAAEV,OAAO,CAACsC,OAAxB;AAAA,6BACE;AAAK,QAAA,GAAG,EAAC,KAAT;AAAe,QAAA,SAAS,EAAEtC,OAAO,CAACuC,OAAlC;AAAA,gCACE;AAAK,UAAA,GAAG,EAAC,KAAT;AAAe,UAAA,SAAS,EAAC,MAAzB;AAAA,kCACE;AAAO,YAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAA,mCACE,QAAC,KAAD;AAAO,cAAA,KAAK,EAAC,MAAb;AAAoB,cAAA,GAAG,EAAElB;AAAzB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAOE;AAAK,UAAA,GAAG,EAAC,KAAT;AAAe,UAAA,SAAS,EAAC,MAAzB;AAAA,kCACE;AAAO,YAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAA,mCACE,QAAC,KAAD;AAAO,cAAA,KAAK,EAAC,MAAb;AAAoB,cAAA,GAAG,EAAEH;AAAzB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBAPF,eAaE;AAAK,UAAA,GAAG,EAAC,KAAT;AAAe,UAAA,SAAS,EAAC,MAAzB;AAAA,kCACE;AAAO,YAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAA,mCACE,QAAC,KAAD;AAAO,cAAA,KAAK,EAAC,MAAb;AAAoB,cAAA,GAAG,EAAEC;AAAzB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBAbF,eAmBE;AAAK,UAAA,GAAG,EAAC,KAAT;AAAe,UAAA,SAAS,EAAC,MAAzB;AAAA,kCACE;AAAO,YAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAA,mCACE,QAAC,KAAD;AAAO,cAAA,KAAK,EAAC,MAAb;AAAoB,cAAA,GAAG,EAAEC;AAAzB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBAnBF,eAyBE;AAAK,UAAA,SAAS,EAAEpB,OAAO,CAACwC,MAAxB;AAAA,kCACE,QAAC,GAAD;AAAK,YAAA,OAAO,EAAE;AAAA,qBAAM7B,WAAW,CAAC,IAAD,CAAjB;AAAA,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE,QAAC,GAAD;AAAK,YAAA,OAAO,EAAE,iBAACY,CAAD;AAAA,qBAAOW,UAAU,CAACX,CAAD,CAAjB;AAAA,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBAzBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,aA1BJ;AAAA,kBADF;AA8DH,CAhID;;GAAMf,Q;UAM0BD,U;;;KAN1BC,Q;AAiIN,eAAeA,QAAf","sourcesContent":["import classes from \"./authform.module.css\";\r\nimport Input from \"../UI/input/input\";\r\nimport Btn from \"../UI/btn/btn\";\r\nimport { useRef, useState } from \"react\";\r\nimport { userLogIn, userSignIn } from \"../../dataFetching/postData\";\r\n// import {signIn} from \"next-auth/client\";\r\nimport { useSession } from \"next-auth/client\";\r\n\r\nconst AuthForm = (props) => {\r\n  // state for page mode sign in mode and login mode\r\n    const [authMode, setAuthMode] = useState(true);\r\n    // defining state for if user loged in or not\r\n    const [isLogin, setIsLogin] = useState(false);\r\n    //\r\n    const [session , loading] = useSession();\r\n    console.log(session);\r\n    console.log(loading);\r\n    // defining ref\r\n    const emailInputRef = useRef();\r\n    const passwordInputRef = useRef();\r\n    const confrimPasswordInputRef = useRef();\r\n    const userNameInputRef = useRef();\r\n    //send email and password to authentiat user\r\n    const logTheUserIn = async (e) => {\r\n      e.preventDefault();\r\n\r\n      const userInfo = {\r\n        email: emailInputRef.current.value,\r\n        password: passwordInputRef.current.value,\r\n      };\r\n\r\n      if(isLogin){\r\n        //\r\n        // signIn('credentials',{\r\n        //   redirect:false,\r\n        // })\r\n      }else{\r\n        try {\r\n          const response = await userLogIn(\r\n            \"http://127.0.0.2:8000/api/v1/user/login\",\r\n            userInfo\r\n          );\r\n          if (response.status === \"success\") {\r\n            console.log(response.token);\r\n          } else {\r\n            throw new Error(\"server responsed with unsuccess\");\r\n          }\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      }\r\n      \r\n      \r\n    }\r\n    const createUser = async (e) => {\r\n      e.preventDefault();\r\n      const newUserInfo = {\r\n        username: userNameInputRef.current.value,\r\n        email: emailInputRef.current.value,\r\n        password: passwordInputRef.current.value,\r\n        passwordConfirm: confrimPasswordInputRef.current.value,\r\n      };\r\n      try{\r\n        const response = await userSignIn(\"http://127.0.0.2:8000/api/v1/user/signup\", newUserInfo);\r\n        if(response.status === \"success\"){\r\n          console.log(response.token);\r\n        }else{\r\n          throw new Error(\"your request is failed\")\r\n        }\r\n      }catch(err){\r\n        console.log(err);\r\n      }\r\n    };\r\n    \r\n    return (\r\n      <>\r\n        {authMode && (\r\n          <div className={classes.Content}>\r\n            <div dir=\"rtl\" className={classes.FormBox}>\r\n              <div dir=\"rtl\" className=\"mb-3\">\r\n                <label className=\"float-right\">آدرس الکترونیکی</label>\r\n                <div>\r\n                  <Input width=\"true\" ref={emailInputRef} />\r\n                </div>\r\n              </div>\r\n              <div dir=\"rtl\" className=\"mb-5\">\r\n                <label className=\"float-right\">رمز عبور</label>\r\n                <div>\r\n                  <Input width=\"true\" ref={passwordInputRef} />\r\n                </div>\r\n              </div>\r\n              <div className={classes.BtnBox}>\r\n                <Btn onClick={(e) => logTheUserIn(e)}>ورود</Btn>\r\n                <Btn className=\"mt-3\" onClick={() => setAuthMode(false)}>\r\n                  ثبت نام نکرده اید!\r\n                </Btn>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {authMode || (\r\n          <div className={classes.Content}>\r\n            <div dir=\"rtl\" className={classes.FormBox}>\r\n              <div dir=\"rtl\" className=\"mb-3\">\r\n                <label className=\"float-right\">نام کاربری</label>\r\n                <div>\r\n                  <Input width=\"true\" ref={userNameInputRef} />\r\n                </div>\r\n              </div>\r\n              <div dir=\"rtl\" className=\"mb-3\">\r\n                <label className=\"float-right\">آدرس الکترونیکی</label>\r\n                <div>\r\n                  <Input width=\"true\" ref={emailInputRef} />\r\n                </div>\r\n              </div>\r\n              <div dir=\"rtl\" className=\"mb-3\">\r\n                <label className=\"float-right\">رمز عبور</label>\r\n                <div>\r\n                  <Input width=\"true\" ref={passwordInputRef} />\r\n                </div>\r\n              </div>\r\n              <div dir=\"rtl\" className=\"mb-5\">\r\n                <label className=\"float-right\">تکرار رمز عبور</label>\r\n                <div>\r\n                  <Input width=\"true\" ref={confrimPasswordInputRef} />\r\n                </div>\r\n              </div>\r\n              <div className={classes.BtnBox}>\r\n                <Btn onClick={() => setAuthMode(true)}>عضو هستم!</Btn>\r\n                <Btn onClick={(e) => createUser(e)}>ثبت نام</Btn>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </>\r\n    );\r\n}\r\nexport default AuthForm;"]},"metadata":{},"sourceType":"module"}